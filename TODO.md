# TODO

## 性能优化

- [ ] **执行器缓存**: 支持缓存执行器，避免每次执行都完全重新加载环境。
- [ ] **编译缓存**: 缓存已编译好的函数或代码段，避免每次执行时重复编译，提升启动速度。
- [ ] **常驻服务化 (RPC)**: 探索将函数加载到内存中并作为类似 RPC 的服务运行，通过减少进程/环境启动开销来提升响应速度。
- [ ] **JSON 库优化 (C/C++)**: 评估并对比 `cJSON` 与 `yyjson` 的性能与体积，考虑是否替换以提升序列化/反序列化速度（yyjson 通常在速度上更有优势）。

## 架构演进

- [ ] **内存环境优化**: 研究是在内存中保留一个通用的 WASM 环境供各语言运行（节约内存），还是维持每个语言独立环境的现状。

## 已知限制与上游依赖 (@runno/sandbox)

目前由于 `@runno/sandbox` 的限制，部分功能采用了折中方案，待上游 PR 合并后需跟进：

- [ ] **流式 Stdin**: 目前不支持流式输入（我已提 PR）。一旦支持，可优化大批量数据的交互性能。
- [ ] **环境变量与命令行参数**: 目前不支持传入 `env` 和 `args`。
  - 现状：C/C++ 通过生成的包装代码和 `stdin/file/inline` 模拟传参。
  - 目标：支持原生参数传递，减少包装层开销。
- [ ] **多文件编译 (C/C++)**:
  - 现状：由于无法指定多个编译单元，目前只能通过 `#include` 将所有文件塞入主文件。
  - 目标：待上游支持多文件或更灵活的编译配置后，改为标准的多文件编译模式。
- [ ] **C++ 标准支持**: 目前固定为 C++11。
  - 目标：支持用户指定 C++ 标准（如 C++17/20）。
